---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# bibliomatrix <img src="man/figures/sticker.png" align="right" />

<!-- badges: start -->
[![Travis build status](https://travis-ci.org/KTH-Library/bibliomatrix.svg?branch=master)](https://travis-ci.org/KTH-Library/bibliomatrix)
<!-- badges: end -->

The goal of bibliomatrix is to provide a common set of functionality for the Annual Bibliometric Monitoring efforts from the Bibliometrics team at the KTH Library.

## Contact

If you have queries related to the content, functionality or methods used, please send an email to the KTH Library at [biblioteket@kth.se](mailto:biblioteket@kth.se). For technical queries or feature requests, please [open an issue](https://github.com/KTH-Library/bibliomatrix/issues) on this repository.

## Installation

You can install the latest development version of bibliomatrix from [GitHub](https://KTH-Library.github.com/bibliomatrix) with:

``` r
# install.packages("devtools")
devtools::install_github("KTH-Library/bibliomatrix")
```

If you don't already have `devtools`, this package can be installed first with:

``` r
install.packages("devtools", dependencies = TRUE)
```

### Public data

The package includes data from the KTH Annual Bibliometric Monitoring (ABM) public part.

```{r example, , warning=FALSE, message=FALSE}
library(bibliomatrix)
library(dplyr)

# Simple example showing some KTH units for which ABM results are public
abm_public_kth$meta %>%
  select(unit_code, unit_long_en) %>%
  head() %>%
  knitr::kable()

# KTH is level 0, schools level 1 and departments level 2.
# Some basic information about KTH schools:
abm_public_kth$meta %>%
  filter(org_level == 1) %>%
  select(Diva_org_id, unit_code, unit_short, unit_long_en) %>%
  knitr::kable()

# Get ABM results for KTH
kth_abm_tables <- abm_public_kth$units$KTH

# Show parts of ABM table 1 for KTH
kth_abm_tables[[1]] %>%
  select(Publication_Type_DiVA, P_frac, WoS_coverage) %>%
  filter(P_frac > 50) %>%
  knitr::kable()
```

## Development

To further develop or change the package, please refer to instructions at <http://r-pkgs.org/>, then fork this repo, clone it, make the changes and whe done, submit a PR with the changes.

If you wish to work from the CLI, you can use this approach:

<https://github.com/KTH-Library/kontarion#contributions>

For a concrete example - to make a change with regards to adding tests, follow instructions for how to [add a test](https://r-pkgs.org/tests.html) and add it in `test/testthat/` making sure that it verifies expected results, then do the Ctrl+Shift+{D,T,E} steps (if using keyboard shortcuts) and then use git to commit and push the changes to your fork, then issue a PR.
